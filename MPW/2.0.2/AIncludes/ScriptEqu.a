; File ScriptEqu.a
; -----------------------------------------------------------------------------
; Script Manager equates file.
;
; This file contains all equates for the script environment, shared
; equates for the script interface systems, equates that are special for
; the Roman Interface System, and all equates for the script interface
; system package.
;
; Copyright Apple Computer, Inc. 1986 - 1987
; All Rights Reserved
;
; -----------------------------------------------------------------------------

; Note that the version number is divided into two bytes:  The high byte is
; bumped when the changes make the next version incompatible with previous
; versions.  If compatability is maintained, the low byte is bumped.

smgrVers	equ	$0155		; current version number.

; -----------------------------------------------------------------------------
; Constants for the Script Manager trap call, _ScriptUtil.
; -----------------------------------------------------------------------------

; Script Interface System numbers.

smRoman		equ	0			; Font script is Roman.

smJapanese	equ	1			; Font script is Japanese.
smChinese	equ	2			; Font script is Chinese.
smKorean	equ	3			; Font script is Korean.

smArabic	equ	4			; Font script is Arabic.
smHebrew	equ	5			; Font script is Hebrew.
smGreek		equ	6			; Font script is Greek.
smRussian	equ	7			; Font script is Russian.

smRSymbol	equ	8			; Font script is Right-left symbol.

smDevanagari	equ	9			; Font script is Devanagari.
smGurmukhi	equ	10			; Font script is Gurmukhi.
smGujarati	equ	11			; Font script is Gujarati.
smOriya		equ	12			; Font script is Oriya.
smBengali	equ	13			; Font script is Bengali.
smTamil		equ	14			; Font script is Tamil.
smTelugu	equ	15			; Font script is Telugu.
smKannada	equ	16			; Font script is Kannada.
smMalayalam	equ	17			; Font script is Malayalam.
smSinhalese	equ	18			; Font script is Sinhalese.

smBurmese	equ	19			; Font script is Burmese.
smKhmer		equ	20			; Font script is Khmer.
smThai		equ	21			; Font script is Thai.
smLaotian	equ	22			; Font script is Laotian.

smGeorgian	equ	23			; Font script is Georgian.
smArmenian	equ	24			; Font script is Armenian.

smMaldivian	equ	25			; Font script is Maldivian.
smTibetan	equ	26			; Font script is Tibetan.
smMongolian	equ	27			; Font script is Mongolian.
smAmharic	equ	28			; Font script is Amharic.

smSlavic	equ	29			; Font script is Slavic.
smVietnamese	equ	30			; Font script is Vietnamese.
smSindhi	equ	31			; Font script is Sindhi.

smReserved2	equ	32			; Font script is Reserved2.

; Language Codes

langEnglish	equ	0
langFrench	equ	1
langGerman	equ	2
langItalian	equ	3
langDutch	equ	4
langSwedish	equ	5
langSpanish	equ	6
langDanish	equ	7
langPortugese 	equ	8
langNorwegian	equ	9
langHebrew	equ	10
langJapanese	equ	11
langArabic	equ	12
langFinish	equ	13
langGreek	equ	14
langIcelandic	equ	15
langMalta	equ	16
langTurkish	equ	17
langYugoslavian	equ	18
langChinese	equ	19
langUrdu	equ	20
langHindi	equ	21
langThai	equ	22

; Calendar Codes

calGregorian	equ	0
calArabicCivil	equ	1
calArabicLunar	equ	2
calJapanese	equ	3
calJewish	equ	4
calCoptic	equ	5

; Integer Format Codes

intWestern	equ	0
intArabic	equ	1
intRoman	equ	2
intJapanese	equ	3

; CharByte byte types.

smSingleByte	equ	 0
smFirstByte	equ	-1
smLastByte	equ	 1
smMiddleByte	equ	 2

; CharType field masks

smcTypeMask	equ	$000F
smcReserved	equ	$00F0
smcClassMask	equ	$0F00
smcReserved12	equ	$1000
smcRightMask	equ	$2000
smcUpperMask	equ	$4000
smcDoubleMask	equ	$8000

; CharType character types.

smCharPunct	equ	0
smCharAscii	equ	1
smCharEuro	equ	7

; CharType punctuation types.

smPunctNormal	equ	$0000
smPunctNumber	equ	$0100
smPunctSymbol	equ	$0200
smPunctBlank	equ	$0300

; CharType case modifers.

smCharLower	equ	$0000
smCharUpper	equ	$4000

; CharType character size modifiers (1 or multiple bytes).

smChar1byte	equ	$0000
smChar2byte	equ	$8000

; Char2Pixel directions.
	
smLeftCaret	equ	 0			; Place caret for left block.
smRightCaret	equ	-1			; Place caret for right block.
smHilite	equ	 1			; Direction is TESysJust.
	
; Transliterate target types.

smTransAscii	equ	0
smTransNative	equ	1

; Transliterate target modifiers.

smTransLower	equ	$4000
smTransUpper	equ	$8000

; Transliterate source masks.

smMaskAscii	equ	$0001			; 2^smTransAscii
smMaskNative	equ	$0002			; 2^smTransNative

; Result values from GetEnvirons, SetEnvirons, GetScript and SetScript calls.

smBadVerb	equ	-1			; Bad verb passed to a routine.
smBadScript	equ	-2			; Bad script code passed to a routine.

smNotInstalled	equ	0			; routine not available in script

; -----------------------------------------------------------------------------
; GetEnvirons and SetEnvirons verbs.
; -----------------------------------------------------------------------------

smVersion	equ	 0			; Environment version number.
smMunged	equ	 2			; Globals change count.
smEnabled	equ	 4			; Environment enabled flag.
smBidirect	equ	 6			; One bidirectional script.

smFontForce	equ	 8			; Force font flag.
smIntlForce	equ	10			; Force intl flag.
smForced	equ	12			; forced to system script.
smDefault	equ	14			; defaulted to Roman script.

smPrint		equ	16			; Printer action routine.

smSysScript	equ	18			; System script.
smLastScript	equ	20			; Last keyboard script.
smKeyScript	equ	22			; Keyboard script.

smSysRef	equ	24			; System folder refNum.
smKeyCache	equ	26			; Keyboard table cache pointer.
smKeySwap	equ	28			; Swapping table pointer.

smLastEVerb	equ	smKeySwap		; Last environment verb.

; GetScript and SetScript verbs.

smScriptVersion	equ	 0			; Script software version.
smScriptMunged	equ	 2			; Script entry changed count.
smScriptEnabled	equ	 4			; Script enabled flag.
smScriptRight	equ	 6			; Right to left flag.
smScriptJust	equ	 8			; Justification flag.
smScriptRedraw	equ	10			; Word redraw flag.

smScriptSysFond	equ	12			; Preferred system font.
smScriptAppFond	equ	14			; Preferred Application font.

smScriptBundle	equ	16			; Beginning of dictionary verbs.
smScriptNumber	equ	16			; Script itl0 id, from dictionary.
smScriptDate	equ	18			; Script itl1 id, from dictionary.
smScriptSort	equ	20			; Script itl2 id, from dictionary.
smScriptFlags	equ	22			; flags word
smScriptRsvd2	equ	24			; reserved.
smScriptRsvd3	equ	26			; reserved.
smScriptRsvd4	equ	28			; reserved.
smScriptRsvd5	equ	30			; reserved.
smScriptKeys	equ	32			; Script KEYC id.
smScriptIcon	equ	34			; Script SICN id.

smScriptPrint	equ	36			; Script printer action routine.
smScriptTrap	equ	38			; Trap entry pointer.

smScriptCreator	equ	40			; Script file creator.
smScriptFile	equ	42			; Script file name.
smScriptName	equ	44			; Script name.

smLastSVerb	equ	smScriptName		; Last script verb.

; -----------------------------------------------------------------------------
; Bits in the smScriptFlags word
; -----------------------------------------------------------------------------

smsfIntellCP	equ	0			; script has intellegent cut & paste
smsfSingByte	equ	1			; script has only single bytes
smsfNatCase	equ	2			; native chars have upper & lower case
smsfContext	equ	3			; contextual script (e.g. AIS-based)

; Roman script constants.

romanVers	equ	1			; version number.
romanSysFond	equ	$3FFF			; system font id number.
romanAppFond	equ	3			; application font id number.
romanFlags	equ	1<<smsfIntellCP+1<<smsfSingByte+1<<smsfNatCase	; roman settings

; Script Manager font equates.

smFondStart	equ	$4000			; start from 16K.
smFondEnd	equ	$C000			; past end of range at 48K.

; -----------------------------------------------------------------------------
; Bundle declarations
; -----------------------------------------------------------------------------
; Record declaration for international configuration resource (type itlc).

ItlcRecord	record	0
itlcSystem	ds.w	1			; default system script.
itlcReserved	ds.w	1			; reserved
itlcFontForce	ds.b	1			; default font force flag.
itlcIntlForce	ds.b	1			; default intl force flag.
itlcSize	equ	*			; size of script itlc.
		endr

; Record declaration for international bundle resource (type itlb).

ItlbRecord	record	0
itlbNumber	ds.w	1			; ITL0 id number.
itlbDate	ds.w	1			; ITL1 id number.
itlbSort	ds.w	1			; ITL2 id number.
itlbReserved1	ds.w	1			; reserved.
itlbReserved2	ds.w	1			; reserved.
itlbReserved3	ds.w	1			; reserved.
itlbLang	ds.w	1			; cur language for script
itlbNumRep	ds.b	1			; number representation code
itlbDateRep	ds.b	1			; date representation code
itlbKeys	ds.w	1			; KCHR id number.
itlbIcon	ds.w	1			; SICN id number.
itlbSize	equ	*			; size of bundle.
		endr

; itl2 routine vector offsets.

initHook	equ	0
fetchHook	equ	2
vernierHook	equ	4
projectHook	equ	6
rsvdHook	equ	8
exitHook	equ	10

; String data structure for itl2 stack frames.

IUStrData	record	0
curChar		ds.w	1			; current character.
mapChar 	ds.w	1			; projected character.
decChar 	ds.w	1			; decision char for weak equality.
bufChar 	ds.b	1			; buffer for expansion.
justAfter	ds.b	1			; boolean for AE vs ligature-AE.
ignChar		ds.b	1			; flag: ignore char.
noFetch		ds.b	1			; flag: no fetch of next.
strCnt		ds.w	1			; length word.
strPtr		ds.l	1			; current ptr to string.
		endr

; Stack frame for itl2 routines.

IUSortFrame	record	{oldA6},decrement
result		ds.w	1
aStrText	ds.l	1
bStrText	ds.l	1
aStrLen		ds.w	1
bStrLen		ds.w	1
return		ds.l	1
oldA6		ds.l	1
aInfo		ds	IUStrData
bInfo		ds	IUStrData
wantMag 	ds.b	1			; 1-MagStrig 0-MagIdString.
weakEq		ds.b	1			; Signals at most weak equality.
msLock		ds.b	1			; high byte of master ptr.
weakMag 	ds.b	1			; -1 weak compare, 1 strong compare.
supStorage	ds.b	18			; extra storage.
lkSize		equ	*			; frame size.
paramBytes	equ	aStrText-return
		endr
		

; -----------------------------------------------------------------------------
; Macros for the Script Manager trap call, _ScriptUtil.
; -----------------------------------------------------------------------------

_ScriptUtil	opword	$A8B5

; Trap routine selectors.

smFontScript	equ	 0
smIntlScript	equ	 2
smKybdScript	equ	 4
smFont2Script	equ	 6
smGetEnvirons	equ	 8
smSetEnvirons	equ	10
smGetScript	equ	12
smSetScript	equ	14
smCharByte	equ	16
smCharType	equ	18
smPixel2Char	equ	20
smChar2Pixel	equ	22
smTranslit	equ	24
smFindWord	equ	26
smHiliteText	equ	28
smDrawJust	equ	30
smMeasureJust	equ	32
smParseTable	equ	34

; Trap routine macros.

		macro
		_FontScript
		move.l	#(1<<31)+($0200<<16)+smFontScript,-(sp)
		_ScriptUtil
		endm

		macro
		_IntlScript
		move.l	#(1<<31)+($0200<<16)+smIntlScript,-(sp)
		_ScriptUtil
		endm

		macro
		_KeyScript
		move.l	#(1<<31)+($0002<<16)+smKybdScript,-(sp)
		_ScriptUtil
		endm

		macro
		_Font2Script
		move.l	#(1<<31)+($0202<<16)+smFont2Script,-(sp)
		_ScriptUtil
		endm

		macro
		_GetEnvirons
		move.l	#(1<<31)+($0402<<16)+smGetEnvirons,-(sp)
		_ScriptUtil
		endm

		macro
		_SetEnvirons
		move.l	#(1<<31)+($0206<<16)+smSetEnvirons,-(sp)
		_ScriptUtil
		endm

		macro
		_GetScript
		move.l	#(1<<31)+($0404<<16)+smGetScript,-(sp)
		_ScriptUtil
		endm

		macro
		_SetScript
		move.l	#(1<<31)+($0208<<16)+smSetScript,-(sp)
		_ScriptUtil
		endm

		macro
		_CharByte
		move.l	#(1<<31)+($0206<<16)+smCharByte,-(sp)
		_ScriptUtil
		endm

		macro
		_CharType
		move.l	#(1<<31)+($0206<<16)+smCharType,-(sp)
		_ScriptUtil
		endm

		macro
		_Pixel2Char
		move.l	#(1<<31)+($020E<<16)+smPixel2Char,-(sp)
		_ScriptUtil
		endm

		macro
		_Char2Pixel
		move.l	#(1<<31)+($020C<<16)+smChar2Pixel,-(sp)
		_ScriptUtil
		endm

		macro
		_Transliterate
		move.l	#(1<<31)+($020E<<16)+smTranslit,-(sp)
		_ScriptUtil
		endm

		macro
		_FindWord
		move.l	#(1<<31)+($0012<<16)+smFindWord,-(sp)
		_ScriptUtil
		endm

		macro
		_HiliteText
		move.l	#(1<<31)+($000E<<16)+smHiliteText,-(sp)
		_ScriptUtil
		endm

		macro
		_DrawJust
		move.l	#(1<<31)+($0008<<16)+smDrawJust,-(sp)
		_ScriptUtil
		endm

		macro
		_MeasureJust
		move.l	#(1<<31)+($000C<<16)+smMeasureJust,-(sp)
		_ScriptUtil
		endm

		macro
		_ParseTable
		move.l	#(1<<31)+($0204<<16)+smParseTable,-(sp)
		_ScriptUtil
		endm
	

