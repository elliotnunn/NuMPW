#	Suspend - MPW Shell Suspend File
#
#	Copyright Apple Computer, Inc. 1986-1995
#	All Rights Reserved.

#	Unset any variables that are set dynamically by the shell so
#	that they get the proper values automatically when the
#	SuspendState script is used.  (That is, their settings won't
#	be saved in the SuspendState script.)

		Unset ∂
			Boot ∂
			SystemFolder ∂
			ShellDirectory
			Active ∂
			Target ∂
			Worksheet ∂
			Status ∂
			User ∂
			# PrefsFolder ∂
			TempFolder ∂
			SysTempFolder

		Begin

#	Save all variables, exports, aliases, key settings, and menus.

			Set
			Export
			Alias
			if `(evaluate "∂`version∂`" !~ /≈3.2≈/)`
				echo 'If `(evaluate "∂`version∂`" !~ /≈3.2≈/)`'
				SetKey
				echo "End"
			end
			AddMenu
			
#	Save the current directory.

			Echo -n "If ∂"∂`Exists "
			Quote -n `Directory`
			Echo "∂`∂""
			Quote Directory `Directory`

#	Save the windows.

			  Windows -o
			
			Echo "End"

#	Save projector state.

			If 1	# change "1" to "0" to skip saving the state of Projector
			  Echo Set Exit 0
			  mountProject
			  (checkoutdir -r -m || set status 0) ≥ dev:null
			  Echo "Project " "`Project -q`"		  
			  Echo Set Exit 1
			End
			
#	Write it all to a temporary file.

		End > "{PrefsFolder}MPW.SuspendState"

#	User tasks.

		Save "{Worksheet}"
