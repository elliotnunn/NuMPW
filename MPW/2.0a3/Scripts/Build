#		Build - build program
#
#		Usage:
#				 Build target [options…] > log
#
#		The Build script builds the specified target, generating a simple log.
#		Make is used to generate the build commands, which are then executed.
#		Makefile <target>.make is used if it is present, otherwise file MakeFile
#		is used.  The options specified are passed to Make.
#
#		Copyright Apple Computer, Inc. 1987
#		All rights reserved.

Set Exit 1
Echo
Echo
If "{#}" == 0 OR "{1}" =~ /-≈/
		Echo "### {0} - Specify a program to build." > Dev:StdErr
		Echo "# Usage - {0} program [options…]" > Dev:StdErr
		Set Exit 0
		Exit 1
End
Echo "# `Date -t` ----- Analyzing dependencies."
Begin
		Echo "Set Echo 1"
		Make {"Parameters"} -f `Files -t TEXT "{1}".make ≥ Dev:Null || Echo MakeFile`
End > "{1}".makeout
Echo "# `Date -t` ----- Executing build commands."
"{1}".makeout
Delete "{1}".makeout
Echo "# `Date -t` ----- Done."
Set type "`files -i -n -x t "{1}" ≥ Dev:Null || Set Status 0`"
If "{type}" =~ /≈ APPL/ OR "{type}" =~ /≈ MPST/ 		# application or tool
		Echo -n ∂t; Quote -n "{1}"; Echo -n " "
Else If "{type}" =~ /≈ DFIL/																				 # desk accessory
		Echo -n ∂t
		Quote -n "Font/DA Mover" "{SystemFolder}"System "{1}";
		Echo -n "  # Install DA"
End
