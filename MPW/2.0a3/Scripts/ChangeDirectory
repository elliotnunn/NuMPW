#		ChangeDirectory - update the Directory menu
#
#		Usage:
#				 ChangeDirectory command [options…]
#
#		The ChangeDirectory script is used as an alias for the commands that
#		change the current directory. It provides all of the capabilities of
#		the original command (by using the original), and also updates the
#		Directory menu.	The current directory also appears in the menu, and
#		is underlined.
#
#		To use the ChangeDirectory script, execute the following Alias commands:
#				 Alias Directory ChangeDirectory Directory
#				 Alias Eject			 ChangeDirectory Eject
#				 Alias Unmount  ChangeDirectory Unmount
#
#		Copyright Apple Computer, Inc. 1987
#		All rights reserved.

Unalias
Set Exit 0
Set old `Directory`
Set cmd "{1}"
Shift
{cmd} {"Parameters"} || Exit
Set new `Directory`
Exit If "{old}" == "{new}"
AddMenu Directory "{old}" ∂
		'Directory "'"{old}"'" > "{MPW}"MPW.Errors ≥ Dev:StdOut ∂
				 || Alert < "{MPW}"MPW.Errors'
AddMenu Directory "{new}"'<U' ∂
		'Directory "'"{new}"'" > "{MPW}"MPW.Errors ≥ Dev:StdOut ∂
				 || Alert < "{MPW}"MPW.Errors'
BuildMenu `Catenate _BuildMenu.target ≥ Dev:Null`
