
; File: SCSIEqu.a
;
; Version  1.0
;
; Copyright  Apple Computer, Inc. 1986
; All Rights Reserved
;

;  Equates for SCSI boot, mgr routines
;  SCSI Traps

;  misc SCSI driver equates

scMacID 	EQU    $80			; SCSI ID for Macintosh Plus (bit 7)
SCSIDrvrs	EQU    $B2E 		; (word) bitmap for loaded SCSI drivers 		<27Oct85>

;  SCSI error codes

scCommErr			EQU   2 			; communications error
scBadparmsErr		EQU   4 			; bad parameters passed to driver
scPhaseErr			EQU   5 			; a phase error
scCompareErr		EQU   6 			; data compare error


;---------------------------------------------------
;
;	 the information pertaining to the read/write
;	 command block interpreter.
;
;	 SCSI command block equates.
;

scOpcode		   EQU	 0		; offsets into command "line" for data xfer
scParam1		   EQU	 2
scParam2		   EQU	 6
scSize			   EQU	 10 	; size of a command line


scInc		   EQU	 1			; xfer with address increment
scNoInc 	   EQU	 2			; xfer without address increment
scAdd		   EQU	 3			; add count to address
scMove		   EQU	 4			; MOVE data from addr1 to addr2
scLoop		   EQU	 5			; decrement loop counter and branch
scNop		   EQU	 6			; do very little
scStop		   EQU	 7			; then stop doing even that
scComp		   EQU	 8			; compare bytes with address increment

;
;	 The layout of block 0 of a bootable SCSI device.
;

SBSigWord	   EQU	 $4552			  ; block 0 validator

SBSig		   EQU	 0		  ; signature word
SBBlkSize	   EQU	 2		  ; block size of device
SBBlkCount	   EQU	 4		  ; # blocks on device
SBDevType	   EQU	 8		  ; device type code
SBDevID 	   EQU	 10
SBData		   EQU	 12 	  ; start of data section
SBDrvCount	   EQU	 16 	  ; # drivers following
SBDrvrs 	   EQU	 18 	  ; start of driver descriptors

; Driver descriptors

DDBlock 	   EQU	 0		  ; physical block of driver
DDSize		   EQU	 4		  ; block count of driver
DDType		   EQU	 6		  ; Processor type of driver
DDLen		   EQU	 8

SBMac		   EQU	 1		  ; Macintosh driver type

;
;	The layout of block 1 of a bootable SCSI device.
;
;	 Partition Descriptors
;

PDSigWord	   EQU	 $5453			  ; block 1 validator

PDSig		   EQU	 0

PDs 		   EQU	 2
PDStart 	   EQU	 0			  ; starting block of partition
PDSize		   EQU	 4		  ; # blocks in partition
PDFSID		   EQU	 8		  ; File System ID of partition creator (or NIL)
PDLen		   EQU	 12

HFSID		   EQU	 'TFS1' 		  ; The HFS filesystem ID

;Routine Selectors

scsiReset		EQU 0
scsiGet 		EQU 1
scsiSelect		EQU 2
scsiCmd 		EQU 3
scsiComplete	EQU 4
scsiRead		EQU 5
scsiWrite		EQU 6
scsiInstall 	EQU 7
scsiRBlind		EQU 8
scsiWBlind		EQU 9
scsiStat		EQU 10

;------------------------------------
;
;	 SCSI Trap definitions.
;

_SCSIDispatch	OPWORD	$A815


	MACRO
	_SCSIReset
	MOVE  #scsiReset,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIGet
	MOVE  #scsiGet,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSISelect
	MOVE  #scsiSelect,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSICmd
	MOVE  #scsiCmd,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIComplete
	MOVE  #scsiComplete,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIRead
	MOVE  #scsiRead,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIWrite
	MOVE  #scsiWrite,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIInstall
	MOVE  #scsiInstall,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIRBlind
	MOVE  #scsiRBlind,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIWBlind
	MOVE  #scsiWBlind,-(sp)
	_SCSIDispatch
	ENDM

	MACRO
	_SCSIStat
	MOVE  #scsiStat,-(sp)
	_SCSIDispatch
	ENDM


